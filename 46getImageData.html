<!DOCTYPE html>  
<html>  
<head>  
  <title></title>  
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0">  
  <style>  
    *{  
      padding: 0;  
      margin: 0;  
    }  
  </style>  
</head>  
<body>  
<img src="img/startCal.png" id="avatar" >
<script type="text/javascript">
function createGSCanvas(img) {
   var canvas=document.createElement("canvas");
   canvas.width=img.width;
   canvas.height=img.height;
   var ctx=canvas.getContext("2d");
   ctx.drawImage(img,0,0);
   
   var c = ctx.getImageData(0, 0, img.width, img.height); 
   
   console.log(c);

   for (i=0; i<c.height; i++) {
       for (j=0; j<c.width; j++) {
           var x = (i*4) * c.width + (j*4);
           var r = c.data[x]; 
   console.log(r);
           var g = c.data[x+1]; 
   console.log(g);
           var b = c.data[x+2]; 
   console.log(b);
           c.data[x] = c.data[x+1] = c.data[x+2] = (r+g+b)/3;        
       }
   }
   ctx.putImageData(c,0,0,0,0, c.width, c.height);
   return canvas.toDataURL(); 
};
window.onload = function() {
  createGSCanvas(document.getElementById('avatar')); 
}
</script>
</body>  